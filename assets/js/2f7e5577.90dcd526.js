"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[239],{6629:e=>{e.exports=JSON.parse('{"DU":"Sentinel","_E":"SOM_SL1680_Mk1","tH":"CMSAC1_AS6806_A","mQ":"sentinel_som_sl1680_mk1","zn":"EVK_SL1680_Mk1","sV":"CMCGAS_AGSL_A","UW":"sentinel-core","ND":"sentinel-media","Uf":"sentinel-media-oobe","IM":"meta-dctk-sentinel","Cy":"root","PO":"setinel"}')},7714:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>x,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"hardware-docs/mipi_dsi","title":"MIPI DSI","description":"Let\'s verify MIPI DSI.","source":"@site/docs/hardware-docs/mipi_dsi.mdx","sourceDirName":"hardware-docs","slug":"/hardware-docs/mipi_dsi","permalink":"/test/docs/hardware-docs/mipi_dsi","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"MIPI CSI","permalink":"/test/docs/hardware-docs/mipi_csi"},"next":{"title":"GPIO","permalink":"/test/docs/hardware-docs/gpio"}}');var r=i(4848),l=i(8453),t=i(6629);i(6540),i(2303);const o={sidebar_position:5},c="MIPI DSI",d={},a=[{value:"Getting Started",id:"getting-started",level:2},{value:"MIPI-DSI Display Configuration",id:"mipi-dsi-display-configuration",level:2},{value:"MIPI-DSI panel configuration parameters",id:"mipi-dsi-panel-configuration-parameters",level:3},{value:"Core Parameters",id:"core-parameters",level:4},{value:"Timing Parameters",id:"timing-parameters",level:4},{value:"Resolution &amp; Sync",id:"resolution--sync",level:4},{value:"Format, Scan &amp; Rate",id:"format-scan--rate",level:4},{value:"Clock Calculations",id:"clock-calculations",level:4},{value:"Power &amp; Initialization",id:"power--initialization",level:4},{value:"Display Timing Parameters",id:"display-timing-parameters",level:4},{value:"Steps to verifing the Mipi DSI interface using Waveshare Display",id:"steps-to-verifing-the-mipi-dsi-interface-using-waveshare-display",level:2},{value:"Connection Diagram",id:"connection-diagram",level:3},{value:"Overlays to by used",id:"overlays-to-by-used",level:3},{value:"Updating Device Tree Overlay",id:"updating-device-tree-overlay",level:3}];function h(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"mipi-dsi",children:"MIPI DSI"})}),"\n",(0,r.jsxs)(n.p,{children:["Let's verify ",(0,r.jsx)(n.strong,{children:"MIPI DSI"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,r.jsx)(n.h2,{id:"mipi-dsi-display-configuration",children:"MIPI-DSI Display Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"mipi-dsi-panel-configuration-parameters",children:"MIPI-DSI panel configuration parameters"}),"\n","\n",(0,r.jsx)(n.h4,{id:"core-parameters",children:"Core Parameters"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Lanes"})," \u2013 Number of Data Lanes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data_Lane_Polarity"})," \u2013 Polarity of the Data Lane"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Clk_Lane_Polarity"})," \u2013 Polarity of the Clock Lane"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"virtual_chan"})," \u2013 Virtual channel number"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Vid_mode"})," \u2013 Video mode. Supported modes:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0"}),": non-burst mode + sync pulse"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"1"}),": non-burst mode + sync event"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"2"}),": Burst mode"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"non-Continuous_clk"})," \u2013 ",(0,r.jsx)(n.code,{children:"0"})," for continuous, ",(0,r.jsx)(n.code,{children:"1"})," for non-continuous clock"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Byte_clk"})," \u2013 Byte clock rate = Total Bandwidth / (Lanes \xd7 8)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Recv_ack"})," \u2013 Receive acknowledgement"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Color_format"})," \u2013 Color coding output format:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"RGB888"})," = ",(0,r.jsx)(n.code,{children:"5"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Loosely_18"})," \u2013 Loosely 18 packed format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data_Polarity"})," \u2013 Data enable signal:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0"}),": Positive"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"1"}),": Negative"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"H_polarity"})," \u2013 Horizontal polarity active low/High"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"V_Polarity"})," \u2013 Vertical polarity"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Eotp_rx"})," \u2013 EOTP Reception enable/disable"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Eotp_tx"})," \u2013 EOTP Transmission enable/disable"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"timing-parameters",children:"Timing Parameters"}),"\n",(0,r.jsxs)(n.ol,{start:"16",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HTOTAL"})," \u2013 Total pixels in a line"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Chunks"})," \u2013 Number of chunks (usually ",(0,r.jsx)(n.code,{children:"1"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Null_Pkt"})," \u2013 Size of the null packet"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"dpi_lp_cmd"})," \u2013 Enable DPI low power command"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"resolution--sync",children:"Resolution & Sync"}),"\n",(0,r.jsxs)(n.ol,{start:"20",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ACTIVE_WIDTH"})," \u2013 Active width"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ACTIVE_HEIGHT"})," \u2013 Active height"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HFP"})," \u2013 Horizontal Front Porch"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HSYNCWIDTH"})," \u2013 Horizontal Sync Width"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HBP"})," \u2013 Horizontal Back Porch"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"VFP"})," \u2013 Vertical Front Porch"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"VSYNCWIDTH"})," \u2013 Vertical Sync Width"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"VBP"})," \u2013 Vertical Back Porch"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"format-scan--rate",children:"Format, Scan & Rate"}),"\n",(0,r.jsxs)(n.ol,{start:"28",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"TYPE"})," \u2013"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0"})," = SD"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"1"})," = Full HD"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"2"})," = UHD"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"SCAN"})," \u2013"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"1"})," = Progressive"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0"})," = Interlaced"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"FRAME_RATE"})," \u2013 Frame rate enum values:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"FRAME_RATE_23P98 = 0\nFRAME_RATE_24    = 1\nFRAME_RATE_25    = 2\nFRAME_RATE_29P97 = 3\nFRAME_RATE_30    = 4\nFRAME_RATE_47P96 = 5\nFRAME_RATE_48    = 6\nFRAME_RATE_50    = 7\nFRAME_RATE_59P94 = 8\nFRAME_RATE_60    = 9\nFRAME_RATE_100   = 10\nFRAME_RATE_119P88= 11\nFRAME_RATE_120   = 12\nFRAME_RATE_89P91 = 13\nFRAME_RATE_90    = 14\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"clock-calculations",children:"Clock Calculations"}),"\n",(0,r.jsxs)(n.ol,{start:"31",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"FREQ"})," \u2013 Pixel clock frequency (KHz)."]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Formula"}),":\n",(0,r.jsx)(n.code,{children:"FREQ = HTOTAL \xd7 VTOTAL \xd7 FRAME_RATE / 1000"}),"\nExample (1080p @ 60Hz):\n",(0,r.jsx)(n.code,{children:"FREQ = 2200 \xd7 1125 \xd7 60 / 1000 = 148500 KHz"})]}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{start:"32",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PTS_PER_4"})," \u2013 PTS per four count"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Formula: ",(0,r.jsx)(n.code,{children:"(4 \xd7 crystal_freq \xd7 1000) / frame_rate"}),"\nExample:\n",(0,r.jsx)(n.code,{children:"PTS_PER_4 = (4 \xd7 90 \xd7 1000) / 60 = 6000"})]}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{start:"33",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PIXEL_CLOCK"})," \u2013 Pixel clock for secondary display, same as ",(0,r.jsx)(n.code,{children:"FREQ"})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"power--initialization",children:"Power & Initialization"}),"\n",(0,r.jsxs)(n.ol,{start:"34",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"mipirst-gpio"})," \u2013 MIPI reset GPIO"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"power-supply"})," \u2013 External power supply control"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"backlight"})," \u2013 Backlight control"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"COMMAND"})," \u2013 Initialization command (hex format)"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Command Format"}),":\n",(0,r.jsx)(n.code,{children:"<CMD> <Payload-length-n> <BYTE1> ... <BYTEn>"})]}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Long write Ex: 39 04 FF 98 81 03","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"CMD => 0x39"}),"\n",(0,r.jsx)(n.li,{children:"Length => 0x04"}),"\n",(0,r.jsx)(n.li,{children:"PayLoad => FF 98 81 0"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Delay in microseconds ",(0,r.jsx)(n.strong,{children:"Command format:"}),(0,r.jsx)(n.code,{children:"0xFF <4BYTE delay>"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Delay for 100ms (100000us => 0x000186A0)"}),"\n",(0,r.jsx)(n.li,{children:"FF A0 86 01 00"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"display-timing-parameters",children:"Display Timing Parameters"}),"\n",(0,r.jsxs)(n.p,{children:["These parameters are mandatory for ",t.DU," ",t._E,"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"VB_MIN - Minimum vertical blanking for the Display TG"}),"\n",(0,r.jsx)(n.li,{children:"HB_MIN - Minimum Horizontal blanking for the Display TG"}),"\n",(0,r.jsx)(n.li,{children:"V_OFF - Vertical offset for the Display TG."}),"\n",(0,r.jsx)(n.li,{children:"H_OFF - Horizontal offset for the Display TG."}),"\n",(0,r.jsx)(n.li,{children:"HB_VOP_OFF - Horizontal VOP offset for the Display TG."}),"\n",(0,r.jsx)(n.li,{children:"VB_VOP_OFF - Vertical VOP offset for the Display TG."}),"\n",(0,r.jsx)(n.li,{children:"HB_BE - Horizontal Blanking Back Edge for the Display TG."}),"\n",(0,r.jsx)(n.li,{children:"VB_BE - Vertical Blanking Back Edge for the Display TG."}),"\n",(0,r.jsx)(n.li,{children:"HB_FP - Horizontal Blanking Front porch for the Display TG."}),"\n",(0,r.jsx)(n.li,{children:"VB_FP - Vertical Blanking Front porch for the Display TG."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For reference for a panel with resolution 800x1280 and HTotal = 952, VTOTAL = 1312. Please refer ",(0,r.jsx)(n.code,{children:"build/workspace/sources/linux-dct/arch/arm64/boot/dts/dct/setinel-ws-panel-overlay.dts"})]}),"\n",(0,r.jsx)(n.h2,{id:"steps-to-verifing-the-mipi-dsi-interface-using-waveshare-display",children:"Steps to verifing the Mipi DSI interface using Waveshare Display"}),"\n",(0,r.jsx)(n.h3,{id:"connection-diagram",children:"Connection Diagram"}),"\n",(0,r.jsx)(n.h3,{id:"overlays-to-by-used",children:"Overlays to by used"}),"\n",(0,r.jsx)(n.h3,{id:"updating-device-tree-overlay",children:"Updating Device Tree Overlay"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Boot into U-Boot by continuosly pressing any key while booting and set variable ",(0,r.jsx)(n.code,{children:"dtbo"})," with the required device tree overlay."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"For example to use the waveshare 7'' display in DSI port:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"setenv dtbo sentinel-sl1680-ws-panel-overlay.dtbo\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Verify the variable is correctly set in the uboot."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"printenv\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Save the variable to the eMMC for persist in reboot."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"saveenv\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Finally boot the device with updated overlay."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"boot\n"})})]})}function x(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>o});var s=i(6540);const r={},l=s.createContext(r);function t(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);